{"version":3,"names":["props","__props","screenWidth","common_vendor","ref","index","getWindowInfo","sizeNum","computed","size","value","strokeWidthNum","strokeWidth","drawProgress","getCurrentInstance","ctx","createCanvasContext","centerX","centerY","radius","startAngle","Math","PI","endAngle","percent","clearRect","beginPath","arc","setFillStyle","fill","setLineWidth","setStrokeStyle","bgColor","stroke","progressColor","setLineCap","draw","onMounted","watch","wx","createComponent","_sfc_main"],"sources":["ring.vue","D:/HBuilderX/plugins/uniapp-cli-vite/uniComponent:/RTovcHJvZ3JhbS9Gcm9udEVuZC91bmkvZGV0ZWN0b3IvcGFnZXMvaW5kZXgvcmluZy52dWU"],"sourcesContent":["\n<script setup>\nimport { ref, watch, onMounted, defineProps, computed } from 'vue'\nimport { onReady } from '@dcloudio/uni-app'  \nconst props = defineProps({\n  id: {\n    type: String,\n    required: true\n  },\n  progressColor: {\n    type: String,\n    default: '#409EFF'\n  },\n  bgColor: {\n    type: String,\n    default: '#F9FAFB'\n  },\n  size: {\n    type: Number,\n    default: 100\n  },\n  strokeWidth: {\n    type: Number,\n    default: 20\n  },\n  percent: {\n    type: Number,\n    default: 0\n  }\n})\n\n// 响应式尺寸计算\nconst screenWidth = ref(uni.getWindowInfo().screenWidth)\nconst sizeNum = computed(() => (props.size / 750) * screenWidth.value)\nconst strokeWidthNum = computed(() => (props.strokeWidth / 750) * screenWidth.value)\n\n// Canvas绘制逻辑\nconst drawProgress = () => {\n  const instance = getCurrentInstance();\r\n  const ctx = uni.createCanvasContext('myCanvas');\n  const centerX = sizeNum.value / 2\n  const centerY = sizeNum.value / 2\n  const radius = (sizeNum.value - strokeWidthNum.value) / 2\n  const startAngle = -Math.PI / 2\n  const endAngle = startAngle + (props.percent / 100) * 2 * Math.PI\n\n  // 清空画布\n  ctx.clearRect(0, 0, sizeNum.value, sizeNum.value)\n\n  // 绘制背景\n  ctx.beginPath()\n  ctx.arc(centerX, centerY, radius, 0, 2 * Math.PI)\n  ctx.setFillStyle('#FFFFFF')\n  ctx.fill()\n\n  // 绘制轨道\n  ctx.beginPath()\n  ctx.arc(centerX, centerY, radius, 0, 2 * Math.PI)\n  ctx.setLineWidth(strokeWidthNum.value)\n  ctx.setStrokeStyle(props.bgColor)\n  ctx.stroke()\n\n  // 绘制进度条\n  ctx.beginPath()\n  ctx.arc(centerX, centerY, radius, startAngle, endAngle)\n  ctx.setLineWidth(strokeWidthNum.value)\n  ctx.setStrokeStyle(props.progressColor)\n  ctx.setLineCap('round')\n  ctx.stroke()\n\n  ctx.draw()\n}\n\n// 自动响应式绘制\nonMounted(drawProgress)\nwatch(() => props.percent, drawProgress)\nwatch([sizeNum, strokeWidthNum], drawProgress)\n</script>\n\n<template>\n  <canvas \r\n    type=\"2d\"\r\n    canvas-id=\"myCanvas\"\n    :style=\"{\n      width: `${sizeNum}px`,\n      height: `${sizeNum}px`\n    }\"\n  />\n  <slot />\n</template>","import Component from 'E:/program/FrontEnd/uni/detector/pages/index/ring.vue'\nwx.createComponent(Component)"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAIA,IAAMA,KAAA,GAAQC,OAAA;IA4Bd,IAAMC,WAAA,GAAcC,aAAA,CAAAC,GAAA,CAAID,aAAA,CAAAE,KAAA,CAAIC,aAAA,EAAa,CAAGJ,WAAW;IACvD,IAAMK,OAAA,GAAUJ,aAAA,CAAQK,QAAA,CAAC;MAAA,OAAOR,KAAA,CAAMS,IAAA,GAAO,MAAOP,WAAA,CAAYQ,KAAK;IAAA;IACrE,IAAMC,cAAA,GAAiBR,aAAA,CAAQK,QAAA,CAAC;MAAA,OAAOR,KAAA,CAAMY,WAAA,GAAc,MAAOV,WAAA,CAAYQ,KAAK;IAAA;IAGnF,IAAMG,YAAA,GAAe,SAAfA,aAAA,EAAqB;MACRC,kBAAA,EAAqB;MACtC,IAAMC,GAAA,GAAMZ,aAAA,CAAAE,KAAA,CAAIW,mBAAA,CAAoB,UAAU;MAC9C,IAAMC,OAAA,GAAUV,OAAA,CAAQG,KAAA,GAAQ;MAChC,IAAMQ,OAAA,GAAUX,OAAA,CAAQG,KAAA,GAAQ;MAChC,IAAMS,MAAA,IAAUZ,OAAA,CAAQG,KAAA,GAAQC,cAAA,CAAeD,KAAA,IAAS;MACxD,IAAMU,UAAA,GAAa,CAACC,IAAA,CAAKC,EAAA,GAAK;MAC9B,IAAMC,QAAA,GAAWH,UAAA,GAAcpB,KAAA,CAAMwB,OAAA,GAAU,MAAO,IAAIH,IAAA,CAAKC,EAAA;MAG/DP,GAAA,CAAIU,SAAA,CAAU,GAAG,GAAGlB,OAAA,CAAQG,KAAA,EAAOH,OAAA,CAAQG,KAAK;MAGhDK,GAAA,CAAIW,SAAA,EAAW;MACfX,GAAA,CAAIY,GAAA,CAAIV,OAAA,EAASC,OAAA,EAASC,MAAA,EAAQ,GAAG,IAAIE,IAAA,CAAKC,EAAE;MAChDP,GAAA,CAAIa,YAAA,CAAa,SAAS;MAC1Bb,GAAA,CAAIc,IAAA,EAAM;MAGVd,GAAA,CAAIW,SAAA,EAAW;MACfX,GAAA,CAAIY,GAAA,CAAIV,OAAA,EAASC,OAAA,EAASC,MAAA,EAAQ,GAAG,IAAIE,IAAA,CAAKC,EAAE;MAChDP,GAAA,CAAIe,YAAA,CAAanB,cAAA,CAAeD,KAAK;MACrCK,GAAA,CAAIgB,cAAA,CAAe/B,KAAA,CAAMgC,OAAO;MAChCjB,GAAA,CAAIkB,MAAA,EAAQ;MAGZlB,GAAA,CAAIW,SAAA,EAAW;MACfX,GAAA,CAAIY,GAAA,CAAIV,OAAA,EAASC,OAAA,EAASC,MAAA,EAAQC,UAAA,EAAYG,QAAQ;MACtDR,GAAA,CAAIe,YAAA,CAAanB,cAAA,CAAeD,KAAK;MACrCK,GAAA,CAAIgB,cAAA,CAAe/B,KAAA,CAAMkC,aAAa;MACtCnB,GAAA,CAAIoB,UAAA,CAAW,OAAO;MACtBpB,GAAA,CAAIkB,MAAA,EAAQ;MAEZlB,GAAA,CAAIqB,IAAA,EAAM;IACZ;IAGAjC,aAAA,CAASkC,SAAA,CAACxB,YAAY;IACtBV,aAAA,CAAAmC,KAAA,CAAM;MAAA,OAAMtC,KAAA,CAAMwB,OAAA;IAAA,GAASX,YAAY;IACvCV,aAAA,CAAKmC,KAAA,CAAC,CAAC/B,OAAA,EAASI,cAAc,GAAGE,YAAY;;;;;;;;;AC3E7C0B,EAAA,CAAGC,eAAA,CAAgBC,SAAS","ignoreList":[]}